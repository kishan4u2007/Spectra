(this.webpackJsonpcontract_moduler=this.webpackJsonpcontract_moduler||[]).push([[8],{1953:function(t,e,s){},1980:function(t,e,s){"use strict";s.r(e);var i=s(2),a=s.n(i),r=(s(1953),s(55)),c=s(41),o=s(20),l=s(19),n=s(13),h=s(9),d=s(8),p=(s(42),s(18)),u=s.n(p),v=(s(501),s(1943)),_=s(43),m=s(303),b=s(70),f=s(40);let g,C,y=!1,L=[];class E extends a.a.Component{constructor(){super(...arguments),this.state={left_checkeds:[],right_checkeds:[],success:!1,errorMsg:"",previouslySelected:[],searchLeft:null,searchRight:null,activeLeft:!1,activeRight:!1,searchPopup:!1,greaterThan:"",lessThan:"",isOldestFirst:{}},this.validateSelectedCode=t=>{var e=!0;return(null===t||void 0===t?void 0:t.length)>1e3?(this.setState({success:!0,errorMsg:"You can select maximum 1000 service codes only."}),e=!1):this.setState({success:!1,errorMsg:""}),e},this.moveToRight=async()=>{await this.props.contractActions.showLoader(),setTimeout(async()=>{const t=this.props.contract[this.props.direction].attributable_services.selecteds,e=this.state.left_checkeds.concat(t);let s=y?e:this.state.left_checkeds;y&&(y=!1,this.setState({left_checkeds:e})),this.state.greaterThan&&this.state.lessThan&&(s=s.filter(t=>t>this.state.greaterThan&&t<this.state.lessThan));const i=this.props.contract[this.props.direction].attributable_services.selecteds;if(L=i,this.state.searchLeft){var a;if(s=null===(a=s)||void 0===a?void 0:a.filter(t=>!L.includes(t)),this.state.searchLeft.toString().replace(/\s/g,"").match(/^[0-9a-zA-Z.]+$/)){var r;s=null===(r=s)||void 0===r?void 0:r.filter(t=>{let e=!1;if(g.map(s=>{if(t.toLowerCase()===s.id.toLowerCase())return e=!0,!1}),e)return t})}else{var c;this.state.searchLeft;s=null===(c=s)||void 0===c?void 0:c.filter(t=>{if(t.toLowerCase().includes(this.state.searchLeft.toLowerCase()))return t})}s=s.concat(t)}if(!this.validateSelectedCode(s))return await this.props.contractActions.hideLoader(),!1;s=[...new Set(s)],this.props.contractActions.changeContract({...this.props.contract,[this.props.direction]:{...this.props.contract[this.props.direction],attributable_services:{...this.props.contract[this.props.direction].attributable_services,selecteds:s}}}),this.props.setErrors(),await this.props.contractActions.hideLoader()},500)},this.saveBtn=()=>{y=!0;const t=this.props.contract[this.props.direction].attributable_services.selecteds;L=t,t.length>0?this.props.setClearSelection(!1):this.props.setClearSelection(!0),this.props.contract.include_plurality_2.attributable_services.selecteds.length>0&&this.props.contractActions.changeContract({...this.props.contract,include_plurality_2:{samePluralityAlgorithm1:!1}}),this.props.contractActions.changeContract({...this.props.contract,clearSelection:!0}),this.props.onClose()},this.moveToLeft=()=>{var t;if(this.state.searchRight)if(this.state.searchRight.toString().trim().match(/^[A-Za-z]+$/)){var e;const t=null===(e=C)||void 0===e?void 0:e.filter(t=>{if(t.display.toLowerCase().includes(this.state.searchRight.toLowerCase()))return t}).map(t=>t.id);this.state.right_checkeds=t}else{var s;this.state.right_checkeds=null===(s=this.state.right_checkeds)||void 0===s?void 0:s.filter(t=>{if(t.toLowerCase().includes(this.state.searchRight.toLowerCase()))return t})}this.props.contractActions.changeContract({...this.props.contract,[this.props.direction]:{...this.props.contract[this.props.direction],attributable_services:{...this.props.contract[this.props.direction].attributable_services,selecteds:null===(t=this.props.contract[this.props.direction].attributable_services.selecteds)||void 0===t?void 0:t.filter(t=>!this.state.right_checkeds.includes(t))}}})},this.close=()=>{var t;y=!0,L&&(null===(t=L)||void 0===t?void 0:t.length)>0?this.props.contractActions.changeContract({...this.props.contract,[this.props.direction]:{...this.props.contract[this.props.direction],attributable_services:{...this.props.contract[this.props.direction].attributable_services,selecteds:L}}}):this.props.contractActions.changeContract({...this.props.contract,[this.props.direction]:{...this.props.contract[this.props.direction],attributable_services:{...this.props.contract[this.props.direction].attributable_services,selecteds:[]}}}),this.props.onClose()},this.btnclick=()=>{this.setState({activeLeft:!0})},this.btnclick2=()=>{this.setState({activeRight:!0})},this.fieldChange=(t,e,s)=>{"Between"===s.id&&this.setState({searchPopup:!0}),this.props.contractActions.changeContract({...this.props.contract,[t]:{...this.props.contract[t],attributable_services:{...this.props.contract[t].attributable_services,selecteds:[],attribution_filter_selected:s}}})},this.leftfilter=async(t,e,s)=>{t?this.setState({searchLeft:t}):await this.setState({greaterThan:e,lessThan:s,searchLeft:""},(function(){console.log(this.state.greaterThan)}))},this.handleKeyDown=t=>{"Backspace"===t.key&&(t.target.value="")},this.onToggleLeftGrid=(t,e,s)=>{let i=t;"serviceCode"===e?this.state.isOldestFirst[e]?i.sort((function(t,e){var s=t.code;return e.code.localeCompare(s)})):i.sort((function(t,e){var s=t.code,i=e.code;return s.localeCompare(i)})):this.state.isOldestFirst[e]?i.sort((function(t,e){var s=t.display;return e.display.localeCompare(s)})):i.sort((function(t,e){var s=t.display,i=e.display;return s.localeCompare(i)})),this.setState({isOldestFirst:{[e]:!this.state.isOldestFirst[e]}}),this.props.contractActions.changeContract({...this.props.contract,[s]:{...this.props.contract[s],attributable_services:{...this.props.contract[s].attributable_services,options:i}}})},this.onToggleRightGrid=(t,e,s)=>{let i=t;"serviceCode"===e?this.state.isOldestFirst[e]?i.sort((function(t,e){var s=t.code;return e.code.localeCompare(s)})):i.sort((function(t,e){var s=t.code,i=e.code;return s.localeCompare(i)})):this.state.isOldestFirst[e]?i.sort((function(t,e){var s=t.display;return e.display.localeCompare(s)})):i.sort((function(t,e){var s=t.display,i=e.display;return s.localeCompare(i)})),this.setState({isOldestFirst:{[e]:!this.state.isOldestFirst[e]}}),this.props.contractActions.changeContract({...this.props.contract,[s]:{...this.props.contract[s],attributable_services:{...this.props.contract[s].attributable_services,selecteds:i.map(t=>null===t||void 0===t?void 0:t.code)}}})}}componentDidMount(){this.props.contractActions.hideLoader(),L=this.props.contract[this.props.direction].attributable_services.selecteds}componentDidUpdate(t,e){var s,i;const a=null===(s=this.props.contract[this.props.direction].attributable_services.selecteds)||void 0===s?void 0:s.length;if(!u.a.isEqual(e,this.state)||!u.a.isEqual(a,null===(i=t.contract[this.props.direction].attributable_services.selecteds)||void 0===i?void 0:i.length)){this.state.error;a&&this.setState({error:""})}}showLoader(){return this.props.contractActions.showLoader()}hideLoader(){var t;if((null===(t=this.state.left_checkeds)||void 0===t?void 0:t.length)>0)return this.props.contractActions.hideLoader()}render(){var t,e,s,n,h,d,p,u,y;const L=(null===(t=this.state.left_checkeds)||void 0===t?void 0:t.length)>0&&(null===(e=this.state.left_checkeds)||void 0===e?void 0:e.length)==(null===(s=this.props.contract[this.props.direction].attributable_services.options)||void 0===s?void 0:s.length),E=(null===(n=this.state.right_checkeds)||void 0===n?void 0:n.length)>0&&(null===(h=this.state.right_checkeds)||void 0===h?void 0:h.length)==(null===(d=this.props.contract[this.props.direction].attributable_services.selecteds)||void 0===d?void 0:d.length);let x=null===(p=this.props.contract[this.props.direction].attributable_services.options)||void 0===p?void 0:p.filter(t=>!this.props.contract[this.props.direction].attributable_services.selecteds.includes(t.id)),w=this.props.contract[this.props.direction].attributable_services.options,S=this.props.contract[this.props.direction].attributable_services.selecteds.map(t=>this.props.contract[this.props.direction].attributable_services.options.find(e=>e.id==t));C=S,x=null===(u=x)||void 0===u?void 0:u.filter(t=>this.state.greaterThan&&this.state.lessThan?t.id>this.state.greaterThan&&t.id<this.state.lessThan:null==this.state.searchLeft?t:this.props.contract[this.props.direction].attributable_services.attribution_filter_selected&&"Does Not Contain"===this.props.contract[this.props.direction].attributable_services.attribution_filter_selected.code?!t.id.toLowerCase().includes(this.state.searchLeft.toLowerCase())&&!t.display.toLowerCase().includes(this.state.searchLeft.toLowerCase()):this.props.contract[this.props.direction].attributable_services.attribution_filter_selected&&"Starts With"===this.props.contract[this.props.direction].attributable_services.attribution_filter_selected.code?t.id.toLowerCase().startsWith(this.state.searchLeft.toLowerCase())||t.display.toLowerCase().startsWith(this.state.searchLeft.toLowerCase()):t.id.toLowerCase().includes(this.state.searchLeft.toLowerCase())||t.display.toLowerCase().includes(this.state.searchLeft.toLowerCase())?t:void 0),g=x;const k=t=>{let{index:e,key:s,style:i}=t;return a.a.createElement("div",{key:s,style:i,className:"middle"},a.a.createElement("div",{className:"middle-item mx-2 pt-pb-14 d-flex w-100"},a.a.createElement(c.a,{checked:this.state.left_checkeds.includes(x[e].id),onToggle:()=>{var t;if(this.state.left_checkeds.includes(x[e].id))return this.setState({left_checkeds:null===(t=this.state.left_checkeds)||void 0===t?void 0:t.filter(t=>t!=x[e].id)});this.setState({left_checkeds:[...this.state.left_checkeds,x[e].id]})}}),a.a.createElement("div",{className:"speciality-header flex-1 mx-2 d-flex justify-content-center text-item"},x[e].id),a.a.createElement("div",{className:"speciality-header flex-1 text-item"},x[e].display)))};return a.a.createElement(a.a.Fragment,null,this.state.searchPopup?a.a.createElement("div",{className:"searchPopup",style:{zIndex:"9999"}},a.a.createElement(m.a,Object.assign({},this.props,{errorMsg:this.state.errorMsg,open:this.state.searchPopup,leftfilter:this.leftfilter,onClose:!this.state.searchPopup,data:this.state.activeLeft?x:S,activeLeft:this.state.activeLeft,activeRight:this.state.activeRight,handleSuccessClose:()=>this.setState({searchPopup:!this.state.searchPopup})}))):null,a.a.createElement("div",{className:"atributesspecialities-container"},a.a.createElement(r.a,{open:this.props.open,onClose:this.close,pageName:"Attributable",title:"Select Attributable Services"},this.state.success?a.a.createElement(f.a,{maxWidth:"xs",variant:"error",primaryButtonText:"Ok",dialogContent:this.state.errorMsg,showSecondaryButton:!1,open:this.state.success,onClose:()=>this.setState({success:!this.state.success}),onSuccess:()=>this.setState({success:!this.state.success})}):null,a.a.createElement("div",{className:"modal-attributes-specialities d-flex"},a.a.createElement("div",{className:"side flex-2"},a.a.createElement("div",{className:"title mb-2"},"Services"),a.a.createElement("div",{className:"boxspecialities"},a.a.createElement("div",{className:"search_bg d-flex specility_code"},a.a.createElement(_.a,{options:this.props.contract.attribution_filter_option,selected:this.props.contract.include_plurality_1.attributable_services.attribution_filter_selected,onChange:t=>{this.fieldChange("include_plurality_1","attribution_filter_selected",t)}}),this.props.contract.include_plurality_1.attributable_services.attribution_filter_selected&&"Between"===this.props.contract.include_plurality_1.attributable_services.attribution_filter_selected.code&&a.a.createElement("a",{className:"range-search",onClick:()=>this.setState({searchPopup:!0})},"Range Search"),a.a.createElement("div",{className:"input-search-container d-flex align-items-center ".concat(this.props.contract.include_plurality_1.attributable_services.attribution_filter_selected&&"Between"===this.props.contract.include_plurality_1.attributable_services.attribution_filter_selected.code?"disabled":"")},a.a.createElement("input",{type:"text",value:this.state.searchLeft,className:"input-search input active ".concat(this.state.activeLeft?"active":""),placeholder:"Search...",onChange:t=>{this.leftfilter(t.target.value)},onFocus:t=>setTimeout(t.target.select.bind(t.target),20)}),a.a.createElement("div",{className:"btn21 btn-wrapper",onClick:this.btnclick},a.a.createElement(o.a,{icon:l.x,className:"icons_color",style:{fontSize:"15px"}})))),a.a.createElement("div",{className:"header-container px-2 pt-pb-14",style:{padding:"20px 0px"}},a.a.createElement(c.a,{checked:L,onToggle:()=>{if(L)return this.setState({left_checkeds:this.props.contract[this.props.direction].attributable_services.selecteds});const t=this.props.contract[this.props.direction].attributable_services.options.map(t=>t.id);this.setState({left_checkeds:t})}}),a.a.createElement("div",{className:"speciality-header flex-1 mx-2 text-center",onClick:()=>this.onToggleLeftGrid(w,"serviceCode",this.props.direction),style:{marginLeft:20}},"Service Code",a.a.createElement(o.a,{type:"fa",icon:l.y,className:"icons_color",style:{fontSize:"15px"}})),a.a.createElement("div",{className:"speciality-header flex-1",onClick:()=>this.onToggleLeftGrid(w,"serviceDescription",this.props.direction),style:{marginLeft:20}},"Service Description"," ",a.a.createElement(o.a,{type:"fa",icon:l.y,className:"icons_color",style:{fontSize:"15px"}}))),a.a.createElement("div",{className:"middle-container"},a.a.createElement(i.Suspense,{fallback:a.a.createElement("div",null,"loading ...")},a.a.createElement(v.a,{width:456,style:{overflow:"scroll",width:"100%",overflowX:"hidden"},height:232,itemCount:null===(y=x)||void 0===y?void 0:y.length,itemSize:45},k))))),a.a.createElement("div",{className:"separator-middle"},a.a.createElement("div",{className:"box-arrow",onClick:()=>this.moveToRight()},a.a.createElement(o.a,{type:"fa",className:"icons_color",icon:l.i})),a.a.createElement("div",{className:"box-arrow",onClick:()=>this.moveToLeft()},a.a.createElement(o.a,{type:"fa",className:"icons_color",icon:l.h}))),a.a.createElement("div",{className:"side flex-1"},a.a.createElement("div",{className:"title mb-2"},"Selected Services (",S.length,")"),a.a.createElement("div",{className:"boxspecialities"},a.a.createElement("div",{className:"search_bg d-flex specility_code_rght ".concat(0===S.length?"disable":"")},a.a.createElement(_.a,{options:this.props.contract.attribution_filter_option,selected:this.props.contract.include_plurality_2.attributable_services.attribution_filter_selected,onChange:t=>{this.fieldChange("include_plurality_2","attribution_filter_selected",t)}}),this.props.contract.include_plurality_2.attributable_services.attribution_filter_selected&&"Between"===this.props.contract.include_plurality_2.attributable_services.attribution_filter_selected.code&&a.a.createElement("a",{className:"range-search range-search2",onClick:()=>this.setState({searchPopup:!0})},"Range Search"),a.a.createElement("div",{className:"input-search-container d-flex align-items-center ".concat(this.props.contract.include_plurality_2.attributable_services.attribution_filter_selected&&"Between"===this.props.contract.include_plurality_2.attributable_services.attribution_filter_selected.code?"disabled":"")},a.a.createElement("input",{type:"text",value:this.state.searchRight,className:"input-search input2 active ".concat(this.state.activeRight?"active":""),placeholder:"Search...",onChange:t=>{this.setState({searchRight:t.target.value})}}),a.a.createElement("div",{className:"btn21 btn-wrapper",onClick:this.btnclick2},a.a.createElement(o.a,{icon:l.x,className:"icons_color",style:{fontSize:"15px",right:"225px"}})))),a.a.createElement("div",{className:"header-container"},a.a.createElement("div",{className:"header pt-pb-14 d-flex mx-2",style:{width:"100%"}},a.a.createElement(c.a,{checked:E,onToggle:()=>{if(E)return this.setState({right_checkeds:[]});this.setState({right_checkeds:this.props.contract[this.props.direction].attributable_services.selecteds})}}),a.a.createElement("div",{className:"speciality-header flex-1 mx-3 text-center",onClick:()=>this.onToggleRightGrid(S,"serviceCode",this.props.direction),style:{marginLeft:20}},"Service Code"," ",a.a.createElement(o.a,{type:"fa",icon:l.y,className:"icons_color",style:{fontSize:"15px"}})),a.a.createElement("div",{className:"speciality-header flex-2 mx-3",onClick:()=>this.onToggleRightGrid(S,"serviceDescription",this.props.direction),style:{marginLeft:20}},"Service Description"," ",a.a.createElement(o.a,{type:"fa",icon:l.y,className:"icons_color",style:{fontSize:"15px"}})))),a.a.createElement("div",{className:"middle-container",style:{overflowY:"scroll",height:"232px"}},null===S||void 0===S?void 0:S.filter(t=>null==this.state.searchRight?t:this.props.contract[this.props.direction].attributable_specialities.attribution_filter_selected&&"Between"===this.props.contract[this.props.direction].attributable_specialities.attribution_filter_selected.code&&this.state.greaterThan&&this.state.lessThan?t.id>this.state.greaterThan&&t.id<this.state.lessThan:this.props.contract[this.props.direction].attributable_specialities.attribution_filter_selected&&"Does Not Contain"===this.props.contract[this.props.direction].attributable_specialities.attribution_filter_selected.code?!t.id.toLowerCase().includes(this.state.searchRight.toLowerCase())&&!t.display.toLowerCase().includes(this.state.searchRight.toLowerCase()):this.props.contract[this.props.direction].attributable_services.attribution_filter_selected&&"Starts With"===this.props.contract[this.props.direction].attributable_services.attribution_filter_selected.code?t.id.toLowerCase().startsWith(this.state.searchRight.toLowerCase())||t.display.toLowerCase().startsWith(this.state.searchRight.toLowerCase()):t.id.toLowerCase().includes(this.state.searchRight.toLowerCase())||t.display.toLowerCase().includes(this.state.searchRight.toLowerCase())?t:void 0).map(t=>a.a.createElement("div",{className:"middle"},a.a.createElement("div",{className:"middle-item mx-2 pt-pb-14 d-flex w-100"},a.a.createElement(c.a,{checked:this.state.right_checkeds.includes(t.id),onToggle:()=>{var e;if(this.state.right_checkeds.includes(t.id))return this.setState({right_checkeds:null===(e=this.state.right_checkeds)||void 0===e?void 0:e.filter(e=>e!=t.id)});this.setState({right_checkeds:[...this.state.right_checkeds,t.id]})}}),a.a.createElement("div",{className:"speciality-header flex-1 mx-2 d-flex justify-content-center text-item"},t.id),a.a.createElement("div",{className:"speciality-header flex-2 text-item text-left",style:{paddingRight:"15px",lineHeight:"18px"}},t.display)))))))),a.a.createElement("div",{className:"row mt-4 mb-0 midle_style"},a.a.createElement(b.a,{variant:"text",onClick:()=>this.close()},"Cancel"),a.a.createElement(b.a,{variant:"contained",onClick:()=>this.saveBtn()},"Select")))))}}e.default=Object(h.c)(t=>({contract:t.contractReducer.contract,include_plurality_1:t.contractReducer.contract.include_plurality_1,include_plurality_2:t.contractReducer.contract.include_plurality_2}),t=>({contractActions:Object(n.bindActionCreators)(d,t)}))(E)}}]);